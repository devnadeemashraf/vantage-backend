# ============================================
# Vantage Backend — Environment Configuration
# ============================================
# Copy this file to .env and fill in your values:
#   cp .env.txt .env  (then remove .txt)

# Server
PORT=3000
NODE_ENV=development

# PostgreSQL (single URL; pool and SSL are separate)
# Format: postgres://postgres:your_password_here@localhost:5432/vantage?sslmode=disable
DATABASE_URL=postgres://postgres:your_password_here@localhost:5432/vantage?sslmode=disable

# Connection Pool (per cluster worker)
DB_POOL_MIN=2
DB_POOL_MAX=10

# Clustering
WEB_CONCURRENCY=4
# 0 = auto-detect CPU cores, or set a specific number

# Logging
LOG_LEVEL=debug
# Options: fatal, error, warn, info, debug, trace

# ETL
ETL_BATCH_SIZE=5000
ETL_DATA_DIR=./temp/data
# Retries per batch on connection errors (ECONNRESET, etc.); backoff doubles each attempt
ETL_RETRY_ATTEMPTS=3
ETL_RETRY_DELAY_MS=1000
# Pause (ms) after each flush to avoid rate limiting the DB
ETL_FLUSH_DELAY_MS=200
# Release connections before cloud idle timeout (e.g. Render ~5min); default 4min
ETL_POOL_IDLE_TIMEOUT_MS=240000

# Search (performance: candidate cap and short-query behaviour)
# Max candidate IDs considered for search; total results and pagination are capped at this (e.g. 5000 → 250 pages at 20/page).
SEARCH_MAX_CANDIDATES=1000